<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="WinUI3Example.ControlExample"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:essential="using:WinUI3Package"
    xmlns:local="using:WinUI3Example"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <StaticResource x:Key="ControlExampleDisplayBrush" ResourceKey="SolidBackgroundFillColorBaseBrush" />
                    <Thickness x:Key="ControlExampleDisplayBorderThickness">0</Thickness>
                    <StaticResource x:Key="GalleryBackgroundBrush" ResourceKey="SolidBackgroundFillColorBaseBrush" />
                    <StaticResource x:Key="GalleryBorderBrush" ResourceKey="CardStrokeColorDefaultBrush" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <StaticResource x:Key="ControlExampleDisplayBrush" ResourceKey="SolidBackgroundFillColorBaseBrush" />
                    <Thickness x:Key="ControlExampleDisplayBorderThickness">0</Thickness>
                    <StaticResource x:Key="GalleryBackgroundBrush" ResourceKey="SolidBackgroundFillColorBaseBrush" />
                    <StaticResource x:Key="GalleryBorderBrush" ResourceKey="CardStrokeColorDefaultBrush" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="HighContrast">
                    <SolidColorBrush x:Key="ControlExampleDisplayBrush" Color="{ThemeResource SystemColorWindowColor}" />
                    <Thickness x:Key="ControlExampleDisplayBorderThickness">1</Thickness>
                    <SolidColorBrush x:Key="GalleryBackgroundBrush" Color="{ThemeResource SystemColorWindowColor}" />
                    <SolidColorBrush x:Key="GalleryBorderBrush" Color="{ThemeResource SystemColorWindowColor}" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>

            <Thickness x:Key="ControlElementScreenshotModePadding">67</Thickness>

            <Style x:Key="GalleryTileGridStyle" TargetType="Grid">
                <Setter Property="Background" Value="{ThemeResource GalleryBackgroundBrush}" />
                <Setter Property="BorderBrush" Value="{ThemeResource GalleryBorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="CornerRadius" Value="{StaticResource OverlayCornerRadius}" />
            </Style>

            <x:String x:Key="HIcon">
                F1 M 16.639999 7.273927 L 12.059999 4.593926 C 11.24 4.113927 10.219999 4.133927 9.4 4.633926 L 5.3 7.173926 C 4.48 7.693927 4 8.553926 4 9.513927 L 4 14.693927 C 4 15.653927 4.5 16.513927 5.32 16.993927 L 9.52 19.413927 C 9.9 19.633926 10.32 19.753927 10.76 19.753927 C 11.18 19.753927 11.62 19.653927 12 19.433926 L 16.540001 16.873926 C 17.32 16.433926 17.799999 15.593926 17.799999 14.713926 L 17.799999 9.253927 C 17.799999 8.433927 17.360001 7.693927 16.639999 7.273927 Z M 9.46 12.493927 L 9.46 16.113926 L 7.72 16.113926 L 7.72 7.813927 L 9.46 7.813927 L 9.46 10.833927 L 12.32 10.833927 L 12.32 7.813927 L 14.059999 7.813927 L 14.059999 16.113926 L 12.32 16.113926 L 12.32 12.493927 Z
            </x:String>
            <x:String x:Key="CppIcon">
                F1 M 11.1 4.005001 C 10.879999 4.005001 10.639999 4.065001 10.48 4.165001 L 4.62 7.545001 C 4.28 7.745001 4 8.205001 4 8.605001 L 4 15.385001 C 4 15.585001 4.06 15.785001 4.18 15.985001 L 4.18 15.985001 C 4.3 16.185001 4.46 16.345001 4.62 16.445002 L 10.48 19.845001 C 10.82 20.045 11.379999 20.045 11.719999 19.845001 L 11.719999 19.845001 L 17.58 16.445002 C 17.74 16.345001 17.9 16.185001 18.02 15.985001 C 18.139999 15.785001 18.200001 15.585001 18.200001 15.385001 L 18.200001 8.605001 C 18.200001 8.405001 18.139999 8.205001 18.02 8.005001 L 18.02 8.005001 C 17.9 7.805001 17.74 7.645001 17.58 7.545001 L 11.719999 4.165001 C 11.559999 4.065001 11.32 4.005001 11.1 4.005001 Z M 11.1 7.265001 C 12.78 7.265001 14.36 8.165001 15.2 9.625001 L 13.16 10.825001 C 12.74 10.105 11.940001 9.625001 11.1 9.625001 C 9.799999 9.625001 8.74 10.705001 8.74 12.005001 C 8.74 13.305 9.799999 14.365001 11.1 14.365001 C 11.940001 14.365001 12.74 13.925001 13.16 13.185001 L 15.2 14.365001 C 14.36 15.825001 12.78 16.725 11.1 16.725 C 8.5 16.725 6.38 14.605001 6.38 12.005001 C 6.38 9.405001 8.5 7.265001 11.1 7.265001 Z M 14.78 11.205001 L 15.3 11.205001 L 15.3 11.725 L 15.84 11.725 L 15.84 12.265001 L 15.3 12.265001 L 15.3 12.785001 L 14.78 12.785001 L 14.78 12.265001 L 14.26 12.265001 L 14.26 11.725 L 14.78 11.725 Z M 16.759998 11.205001 L 17.279999 11.205001 L 17.279999 11.725 L 17.799999 11.725 L 17.799999 12.265001 L 17.279999 12.265001 L 17.279999 12.785001 L 16.759998 12.785001 L 16.759998 12.265001 L 16.219999 12.265001 L 16.219999 11.725 L 16.759998 11.725 Z
            </x:String>
            <x:String x:Key="XamlIcon">
                F1 M 16.494999 8.600001 L 15.995 9.500001 L 17.235001 11.6 C 17.395 11.860001 17.395 12.140001 17.235001 12.420001 L 15.995 14.500001 L 16.535 15.400001 L 18.494999 12.000001 Z M 16.494999 7.460001 C 16.555 7.460001 16.575001 7.480001 16.575001 7.500001 L 19.075001 11.840001 C 19.134998 11.940001 19.134998 12.060001 19.075001 12.200001 L 16.575001 16.5 C 16.555 16.52 16.514999 16.540001 16.494999 16.540001 C 16.474998 16.540001 16.434999 16.52 16.415001 16.460001 L 15.355 14.620001 C 15.335 14.540001 15.335 14.480001 15.355 14.420001 L 16.735001 12.120001 C 16.755001 12.040001 16.755001 11.980001 16.735001 11.920001 L 15.355 9.580001 C 15.295 9.500001 15.295 9.440001 15.355 9.380001 L 16.415001 7.500001 C 16.434999 7.480001 16.474998 7.460001 16.494999 7.460001 Z M 20.635 11.720001 C 20.775 11.900002 20.775 12.1 20.635 12.280001 L 16.775 19.040001 C 16.634998 19.220001 16.474998 19.300001 16.255001 19.300001 L 8.455 19.300001 C 8.235001 19.320002 8.075 19.220001 7.975 19.040001 L 4.075 12.280001 C 3.975 12.1 3.975 11.900002 4.075 11.720001 L 7.975 4.960001 C 8.075 4.780001 8.235001 4.700001 8.455 4.700001 L 16.255001 4.700001 C 16.474998 4.680001 16.634998 4.780001 16.775 4.960001 Z M 8.495 5.280001 L 4.775 11.720001 L 5.755 11.720001 L 9.075 5.980001 C 9.135 5.900002 9.174999 5.860001 9.235 5.860001 L 11.375 5.860001 C 11.395 5.860001 11.434999 5.880001 11.455 5.920001 C 11.475 5.960001 11.475 6.000001 11.455 6.020001 L 8.174999 11.720001 L 12.195 11.720001 L 15.835 5.280001 Z M 7.555 12.400002 L 7.515 12.280001 C 7.435 12.1 7.415 11.900002 7.475 11.720001 L 10.514999 6.500001 L 9.475 6.500001 L 6.295 12.000001 L 9.475 17.5 L 10.514999 17.5 Z M 8.495 18.720001 L 15.875 18.720001 L 12.195 12.280001 L 8.174999 12.280001 L 11.455 17.980001 C 11.475 18 11.475 18.040001 11.455 18.08 C 11.434999 18.120001 11.395 18.140001 11.375 18.140001 L 9.235 18.140001 C 9.174999 18.140001 9.135 18.1 9.075 18.02 L 5.755 12.280001 L 4.775 12.280001 Z M 16.375 18.440001 L 20.135 12.000001 L 16.375 5.520001 L 12.715 12.000001 Z
            </x:String>
            <x:String x:Key="IdlIcon">
                F1 M 6.3 19.490002 C 5.98 19.490002 5.74 19.230001 5.74 18.91 L 5.74 5.070001 C 5.74 4.750001 5.98 4.490001 6.3 4.490001 L 12.08 4.490001 L 12.08 7.390001 C 12.08 8.030001 12.599999 8.530001 13.24 8.530001 L 16.119999 8.530001 L 16.119999 18.91 C 16.119999 19.230001 15.86 19.490002 15.54 19.490002 Z M 6.3 2.770001 C 5.02 2.770001 4 3.790001 4 5.070001 L 4 18.91 C 4 20.190001 5.02 21.230001 6.3 21.230001 L 15.54 21.230001 C 16.82 21.230001 17.84 20.190001 17.84 18.91 L 17.84 8.330001 C 17.84 7.710001 17.619999 7.150001 17.18 6.710001 L 13.9 3.430001 C 13.46 2.990001 12.9 2.770001 12.28 2.770001 Z M 9.799999 13.190001 C 10.139999 12.85 10.139999 12.310001 9.799999 11.970001 C 9.46 11.630001 8.92 11.630001 8.58 11.970001 L 6.84 13.690001 C 6.5 14.030001 6.5 14.570001 6.84 14.910001 L 8.58 16.650002 C 8.92 16.990002 9.46 16.990002 9.799999 16.650002 C 10.139999 16.310001 10.139999 15.77 9.799999 15.43 L 8.68 14.310001 L 9.799999 13.190001 Z M 13.26 11.970001 C 12.92 11.630001 12.38 11.630001 12.04 11.970001 C 11.7 12.310001 11.7 12.85 12.04 13.190001 L 13.16 14.310001 L 12.04 15.410001 C 11.7 15.750001 11.7 16.310001 12.04 16.650002 C 12.38 16.990002 12.92 16.990002 13.26 16.650002 L 15 14.910001 C 15.34 14.570001 15.34 14.030001 15 13.690001 L 13.26 11.950001 Z
            </x:String>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid x:Name="rootGrid">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <TextBlock
            x:Name="HeaderTextPresenter"
            Margin="0,12"
            AutomationProperties.HeadingLevel="Level3"
            Style="{ThemeResource BodyStrongTextBlockStyle}"
            Text="{x:Bind HeaderText}" />

        <RichTextBlock
            x:Name="ErrorTextBlock"
            Grid.Row="1"
            Margin="0,0,0,12"
            Foreground="{ThemeResource SystemFillColorCriticalBrush}"
            IsTextSelectionEnabled="True"
            Visibility="Collapsed">
            <Paragraph>
                This sample requires a later version of Windows to be fully functional.
            </Paragraph>
        </RichTextBlock>

        <Grid Grid.Row="2" CornerRadius="8">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <UserControl>
                <!--  This acts as a ThemeListener  -->
                <Grid
                    x:Name="ExampleContainer"
                    x:FieldModifier="Public"
                    CornerRadius="8,8,0,0"
                    Style="{ThemeResource GalleryTileGridStyle}">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" MaxWidth="320" />
                        <ColumnDefinition Width="Auto" MaxWidth="320" />
                    </Grid.ColumnDefinitions>

                    <!--  Example Display  -->
                    <ContentPresenter
                        x:Name="ControlPresenter"
                        Padding="12"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        HorizontalContentAlignment="{x:Bind HorizontalContentAlignment}"
                        Background="{ThemeResource ControlExampleDisplayBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="{ThemeResource ControlExampleDisplayBorderThickness}"
                        Content="{x:Bind Example}"
                        CornerRadius="8,8,0,0" />

                    <!--  Output Display  -->
                    <StackPanel
                        Grid.Column="1"
                        Margin="0,12,12,12"
                        Padding="16"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Stretch"
                        Background="{ThemeResource ControlExampleDisplayBrush}"
                        CornerRadius="8"
                        Orientation="Vertical"
                        Visibility="{x:Bind Output, Converter={StaticResource nullToVisibilityConverter}}">
                        <TextBlock Text="Output:" />
                        <ContentPresenter x:Name="OutputPresenter" Content="{x:Bind Output, Mode=OneWay}" />
                    </StackPanel>

                    <!--  Options Display  -->
                    <ContentPresenter
                        x:Name="OptionsPresenter"
                        Grid.Column="2"
                        Padding="16"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
                        BorderThickness="1,0,0,0"
                        Content="{x:Bind Options}"
                        Visibility="{x:Bind Options, Converter={StaticResource nullToVisibilityConverter}}" />
                </Grid>
            </UserControl>

            <!--  Sample code display  -->
            <Expander
                Grid.Row="1"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                CornerRadius="0,0,8,8"
                IsExpanded="True"
                Loaded="Expander_Loaded">

                <Expander.Header>
                    <TextBlock Text="Source code" />
                </Expander.Header>

                <Pivot
                    x:Name="CodePivot"
                    Margin="0,-16,0,0"
                    ItemsSource="{x:Bind CodeItems}">
                    <Pivot.HeaderTemplate>
                        <DataTemplate x:DataType="local:CodeSource">
                            <essential:SwitchPresenter Margin="-4,0,0,0" Value="{x:Bind CodeLanguage}">
                                <essential:Case>
                                    <essential:Case.Value>
                                        <local:Language>Xaml</local:Language>
                                    </essential:Case.Value>
                                    <PathIcon Data="{StaticResource XamlIcon}" ToolTipService.ToolTip="Xaml" />
                                </essential:Case>
                                <essential:Case>
                                    <essential:Case.Value>
                                        <local:Language>H</local:Language>
                                    </essential:Case.Value>
                                    <PathIcon Data="{StaticResource HIcon}" ToolTipService.ToolTip="C++ Header" />
                                </essential:Case>
                                <essential:Case>
                                    <essential:Case.Value>
                                        <local:Language>Cpp</local:Language>
                                    </essential:Case.Value>
                                    <PathIcon Data="{StaticResource CppIcon}" ToolTipService.ToolTip="C++ Source" />
                                </essential:Case>
                                <essential:Case IsDefault="True">
                                    <PathIcon Data="{StaticResource IdlIcon}" ToolTipService.ToolTip="Idl" />
                                </essential:Case>
                            </essential:SwitchPresenter>
                        </DataTemplate>
                    </Pivot.HeaderTemplate>
                    <Pivot.ItemTemplate>
                        <DataTemplate x:DataType="local:CodeSource">
                            <local:Editor
                                Margin="0,4"
                                Code="{x:Bind Code}"
                                CodeLanguage="{x:Bind CodeLanguage}" />
                        </DataTemplate>
                    </Pivot.ItemTemplate>
                </Pivot>
            </Expander>
        </Grid>
    </Grid>
</UserControl>
