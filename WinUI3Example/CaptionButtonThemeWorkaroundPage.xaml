<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="WinUI3Example.CaptionButtonThemeWorkaroundPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:WinUI3Example"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <local:ControlExample HeaderText="When you have Window.ExtendsContentIntoTitleBar(true), the caption buttons often comes out with broken color regarding to theme. This helper fixed it by working as a hidden control and listens to theme message, and make corresponding changes to caption buttons.">
        <Grid ColumnSpacing="5" RowSpacing="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button x:Name="CreateDefaultWindowButton" Click="CreateDefaultWindowButton_Click">Create default window</Button>
            <Button
                x:Name="CreateWorkaroundWindowButton"
                Grid.Column="1"
                Click="CreateWorkaroundWindowButton_Click">
                Create window with workaround
            </Button>

            <Button
                x:Name="CompareWindowsButton"
                Grid.Row="1"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Stretch"
                Click="CompareWindowsButton_Click">
                Create 2 windows for comparison
            </Button>
        </Grid>

        <local:ControlExample.Xaml>
            <local:CodeSource>
                <local:CodeSource.Code>
                    <x:String xml:space="preserve">&lt;!--  This is broken  --&gt;
&lt;Window
    x:Class=&quot;WinUI3Example.DefaultWindowBrokenCaptionButton&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
    xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;
    xmlns:local=&quot;using:WinUI3Example&quot;
    xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;
    Title=&quot;DefaultWindowBrokenCaptionButton&quot;
    mc:Ignorable=&quot;d&quot;&gt;

    &lt;Grid&gt;
        &lt;TextBlock
            HorizontalAlignment=&quot;Center&quot;
            VerticalAlignment=&quot;Center&quot;
            Text=&quot;This is a default WinUI3 Window&quot; /&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;
                    
&lt;!--  This is fixed  --&gt;
&lt;Window
    x:Class=&quot;WinUI3Example.DefaultWindowCaptionButtonWorkaround&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
    xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;
    xmlns:essential=&quot;using:WinUI3Package&quot;
    xmlns:local=&quot;using:WinUI3Example&quot;
    xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;
    Title=&quot;DefaultWindowCaptionButtonWorkaround&quot;
    mc:Ignorable=&quot;d&quot;&gt;

    &lt;Grid&gt;
        &lt;essential:WindowCaptionButtonThemeWorkaround Window=&quot;{x:Bind}&quot; /&gt;
        &lt;TextBlock
            HorizontalAlignment=&quot;Center&quot;
            VerticalAlignment=&quot;Center&quot;
            Text=&quot;This is a default WinUI3 Window with CaptionButtonThemeWorkaround&quot; /&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;                    </x:String>
                </local:CodeSource.Code>
            </local:CodeSource>
        </local:ControlExample.Xaml>
    </local:ControlExample>
</Page>
